<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    </head>
    <body>
        <form id="input_form">
            <label for="input_text">Input</label>
            <br>
            <textarea id="input_text" rows="20" cols="100">Nm0Fe1W2R5 N(SO)3 199</textarea>
            <br>
            <label for="subscript">subscript</label>
	    <input type="checkbox" name="subscript" value=""></input>
	    <br>
	    <input type="submit" name="submit"></input>
        </form>

	<script>
		$("#input_form").submit(function(event) {
			console.log("input form submitted");
			event.preventDefault();
			var input_text = $("#input_text").val();
			console.log(input_text);
			var output_text = input_text;

			const subscripts = [
				"\u2080",
				"\u2081",
				"\u2082",
				"\u2083",
				"\u2084",
				"\u2085",
				"\u2086",
				"\u2087",
				"\u2088",
				"\u2089" ];


			console.log(subscripts);

			for (let i = 0; i < 10; i++) {
				console.log(i);
				var regex = new RegExp(`([a-zA-Z\)])${i}`, 'g');
				var output_text = output_text.replace(regex, "$1" + subscripts[i]);
			}
			$("#output_text").val(output_text);
		});

		function copyToClipboard(text) {
			var $temp = $("<input>");
			$("body").append($temp);
			$temp.val(text).select();
			document.execCommand("copy");
			$temp.remove();
			console.log("copied to clipboard");
		}
	</script>

	<br>
	<textarea id="output_text" rows=20 cols=100></textarea>
	<br>
	<input type="button" id="copy" value="copy to clipboard"></button>

	<script>
		$("#copy").click(function () {
			copyToClipboard($('#output_text').val());
		});
	</script>

    </body>
</html>
